(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{350:function(e,t,n){"use strict";n.r(t);var s=n(6),a=n(1),o=n(0),i=n(309),r=n(92),l=n(88),c=n(9),d=n(2),u=n(8),b=n(20),j=n(183),m=n.n(j),f=n(10),O=n(310),p=n(32);const v=f.a.div({backgroundColor:d.b.N80,borderRadius:3,color:"white",fontSize:"0.75rem",fontWeight:500,padding:`${d.d/2}px ${d.d}px`,pointerEvents:"none",zIndex:2}),g=({targetNode:e,placement:t,style:n,className:i,children:r})=>{const[l,c]=Object(o.useState)(null),{styles:u}=Object(O.a)(e,l,{placement:t,modifiers:[{name:"hide",enabled:!1},{name:"preventOverflow",enabled:!1}]});return Object(b.createPortal)(Object(a.jsx)("div",{ref:c,css:{zIndex:2e3},style:Object(s.a)(Object(s.a)({},n),u.popper)},Object(a.jsx)("div",{css:{margin:d.d}},Object(a.jsx)(v,{className:i},r))),document.body)},x={passive:!0};let h;var y=({children:e,content:t,onHide:n,onShow:s,placement:i="bottom",className:r,hideOnMouseDown:l,hideOnKeyDown:c,delay:d=300})=>{const[u,b]=Object(o.useState)(!1),j=Object(o.useRef)();return Object(o.useEffect)(()=>{const e=j.current;if(!e)throw new Error("You must pass the ref onto your target node.");if(!e.nodeName)throw new Error("It looks like you've passed the ref onto a component. You must pass the ref onto your target node.");let t=()=>{};const n=()=>{t(),b(!1)},s=()=>{t(),u||(l&&e&&e.addEventListener("mousedown",n,x),c&&document.addEventListener("keydown",n,x),t=((e,t)=>{const n=h&&h.pending();n&&h.flush();return m()(e,n?0:t).cancel})(()=>b(!0),d))},a=()=>{var s,a;(t(),u)&&(l&&e&&e.removeEventListener("mousedown",n,x),c&&document.removeEventListener("keydown",n,x),s=()=>b(!1),a=d,h=m()(s,a),t=h.cancel)};return e.addEventListener("mouseenter",s,x),e.addEventListener("mouseleave",a,x),()=>{t(),e&&(e.removeEventListener("mouseenter",s,x),e.removeEventListener("mouseleave",a,x))}},[u]),Object(a.jsx)(o.Fragment,null,e(j),Object(a.jsx)(p.b,{isOpen:u,onEntered:s,onExited:n},e=>Object(a.jsx)(g,{targetNode:j.current,placement:i,className:r,style:Object(p.c)(e)},t)))},w=n(322),D=n(215);n(167),n(166),n(119),n(321);function L({listKey:e,value:t,onAddUser:n,many:s,isDisabled:o}){const l="authenticated"+e,{data:b}=Object(i.a)(r.d`
    query User {
      ${l} {
        _label_
        id
      }
    }
  `);if(b&&b[l]){const e=b[l].id;if(null!==t&&(s?t.some(t=>t.id===e):t.id===e))return null;const i=`${s?"Add":"Set as"} ${b[l]._label_}`;return Object(a.jsx)(y,{placement:"top",content:i},e=>Object(a.jsx)(u.b,{css:{marginLeft:d.d},variant:"ghost",ref:e,onClick:()=>{n(b[l])},icon:c.n,"aria-label":i,isDisabled:o}))}return null}function k({field:e,value:t}){const{many:n}=e.config,{fullPath:s}=e.getRefList();let o,i=!1,r=s;return n?(o="View List of Related Items",t.length||(i=!0),r=`${r}?!id_in="${t.slice(0,100).map(({id:e})=>e).join(",")}"`):(o="View Item Details",t?r=`${r}/${t.id}`:i=!0),Object(a.jsx)(y,{placement:"top",content:o},e=>Object(a.jsx)(u.b,{ref:e,icon:c.k,"aria-label":o,variant:"ghost",css:{marginLeft:d.d},target:"_blank",to:r,isDisabled:i}))}function E({field:e,item:t,onCreate:n,isDisabled:i}){const{list:r,openCreateItemModal:l}=Object(D.e)();let b,j=e.getRefList(),m="Create and add "+j.singular;return t&&t.id&&(b=j.fields.filter(t=>"Relationship"===t.type&&t.config.ref===r.key&&t.config.refFieldPath===e.path).reduce((e,n)=>{const a={_label_:t._label_||"<link to parent>",id:t.id};return Object(s.a)(Object(s.a)({},e),{},{[n.path]:n.config.many?[a]:a})},{})),Object(a.jsx)(o.Fragment,null,Object(a.jsx)(y,{placement:"top",content:m},e=>Object(a.jsx)(u.b,{ref:e,onClick:l,icon:c.o,"aria-label":m,variant:"ghost",css:{marginLeft:d.d},isDisabled:i})),Object(a.jsx)(D.a,{prefillData:b,onCreate:({data:e})=>{n(e[j.gqlNames.createMutationName])}}))}t.default=({autoFocus:e,field:t,value:n=[],renderContext:s,errors:o,onChange:i,item:r,list:c,isDisabled:d})=>{const{many:u,ref:b}=t.config,{authStrategy:j}=Object(D.d)(),m="ks-input-"+t.path,f=t.getRefList();return Object(a.jsx)(l.a,null,Object(a.jsx)(l.d,{htmlFor:m,field:t,errors:o}),Object(a.jsx)(l.b,{text:t.adminDoc}),Object(a.jsx)(l.c,null,Object(a.jsx)("div",{css:{flex:1}},Object(a.jsx)(w.a,{autoFocus:e,isMulti:u,field:t,value:n,errors:o,renderContext:s,htmlID:m,onChange:e=>{const{many:n}=t.config;i(n?e?e.map(e=>e.value):[]:e?e.value:null)},isDisabled:d})),Object(a.jsx)(D.b,{list:f},Object(a.jsx)(E,{onCreate:e=>{i(u?n.concat(e):e)},field:t,item:r,list:c,isDisabled:d})),j&&b===j.listKey&&Object(a.jsx)(L,{many:u,onAddUser:e=>{i(u?n.concat(e):e)},value:n,listKey:j.listKey,isDisabled:d}),Object(a.jsx)(k,{field:t,value:n})))}}}]);